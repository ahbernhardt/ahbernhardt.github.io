{"ast":null,"code":"// src/index.ts\nimport { inject, nextTick, onBeforeUnmount as onBeforeUnmount2, watchEffect as watchEffect2 } from \"vue\"; // src/constants.ts\n\nvar PROVIDE_KEY = \"usehead\";\nvar HEAD_COUNT_KEY = \"head:count\";\nvar HEAD_ATTRS_KEY = \"data-head-attrs\";\nvar SELF_CLOSING_TAGS = [\"meta\", \"link\", \"base\"];\nvar BODY_TAG_ATTR_NAME = \"data-meta-body\"; // src/utils.ts\n\nimport { resolveUnref } from \"@vueuse/shared\";\nimport { unref } from \"vue\";\n\nvar sortTags = (aTag, bTag) => {\n  const tagWeight = tag => {\n    if (tag.props.renderPriority) return tag.props.renderPriority;\n\n    switch (tag.tag) {\n      case \"base\":\n        return -1;\n\n      case \"meta\":\n        if (tag.props.charset) return -2;\n        if (tag.props[\"http-equiv\"] === \"content-security-policy\") return 0;\n        return 10;\n\n      default:\n        return 10;\n    }\n  };\n\n  return tagWeight(aTag) - tagWeight(bTag);\n};\n\nvar tagDedupeKey = tag => {\n  if (![\"meta\", \"base\", \"script\", \"link\", \"title\"].includes(tag.tag)) return false;\n  const {\n    props,\n    tag: tagName\n  } = tag;\n  if (tagName === \"base\" || tagName === \"title\") return tagName;\n  if (tagName === \"link\" && props.rel === \"canonical\") return \"canonical\";\n  if (props.charset) return \"charset\";\n  const name = [\"key\", \"id\", \"name\", \"property\", \"http-equiv\"];\n\n  for (const n of name) {\n    let value;\n    if (typeof props.getAttribute === \"function\" && props.hasAttribute(n)) value = props.getAttribute(n);else value = props[n];\n\n    if (value !== void 0) {\n      return `${tagName}-${n}-${value}`;\n    }\n  }\n\n  return false;\n};\n\nfunction resolveUnrefDeeply(ref2) {\n  const root = resolveUnref(ref2);\n  if (!ref2 || !root) return root;\n  if (Array.isArray(root)) return root.map(resolveUnrefDeeply);\n\n  if (typeof root === \"object\") {\n    return Object.fromEntries(Object.entries(root).map(([key, value]) => {\n      if (key === \"titleTemplate\") return [key, unref(value)];\n      return [key, resolveUnrefDeeply(value)];\n    }));\n  }\n\n  return root;\n}\n\nfunction resolveHeadEntry(obj) {\n  return { ...obj,\n    input: resolveUnrefDeeply(obj.input)\n  };\n} // src/dom/utils.ts\n\n\nfunction isEqualNode(oldTag, newTag) {\n  if (oldTag instanceof HTMLElement && newTag instanceof HTMLElement) {\n    const nonce = newTag.getAttribute(\"nonce\");\n\n    if (nonce && !oldTag.getAttribute(\"nonce\")) {\n      const cloneTag = newTag.cloneNode(true);\n      cloneTag.setAttribute(\"nonce\", \"\");\n      cloneTag.nonce = nonce;\n      return nonce === oldTag.nonce && oldTag.isEqualNode(cloneTag);\n    }\n  }\n\n  return oldTag.isEqualNode(newTag);\n}\n\nvar setAttrs = (el, attrs) => {\n  const existingAttrs = el.getAttribute(HEAD_ATTRS_KEY);\n\n  if (existingAttrs) {\n    for (const key of existingAttrs.split(\",\")) {\n      if (!(key in attrs)) el.removeAttribute(key);\n    }\n  }\n\n  const keys = [];\n\n  for (const key in attrs) {\n    const value = attrs[key];\n    if (value == null) continue;\n    if (value === false) el.removeAttribute(key);else el.setAttribute(key, value);\n    keys.push(key);\n  }\n\n  if (keys.length) el.setAttribute(HEAD_ATTRS_KEY, keys.join(\",\"));else el.removeAttribute(HEAD_ATTRS_KEY);\n}; // src/dom/create-element.ts\n\n\nvar createElement = (tag, attrs, document) => {\n  const el = document.createElement(tag);\n\n  for (const key of Object.keys(attrs)) {\n    if (key === \"body\" && attrs.body === true) {\n      el.setAttribute(BODY_TAG_ATTR_NAME, \"true\");\n    } else {\n      const value = attrs[key];\n      if (key === \"renderPriority\" || key === \"key\" || value === false) continue;\n      if (key === \"children\" || key === \"textContent\") el.textContent = value;else if (key === \"innerHTML\") el.innerHTML = value;else el.setAttribute(key, value);\n    }\n  }\n\n  return el;\n}; // src/dom/update-elements.ts\n\n\nvar updateElements = (document = window.document, type, tags) => {\n  var _a, _b;\n\n  const head = document.head;\n  const body = document.body;\n  let headCountEl = head.querySelector(`meta[name=\"${HEAD_COUNT_KEY}\"]`);\n  const bodyMetaElements = body.querySelectorAll(`[${BODY_TAG_ATTR_NAME}]`);\n  const headCount = headCountEl ? Number(headCountEl.getAttribute(\"content\")) : 0;\n  const oldHeadElements = [];\n  const oldBodyElements = [];\n\n  if (bodyMetaElements) {\n    for (let i = 0; i < bodyMetaElements.length; i++) {\n      if (bodyMetaElements[i] && ((_a = bodyMetaElements[i].tagName) == null ? void 0 : _a.toLowerCase()) === type) oldBodyElements.push(bodyMetaElements[i]);\n    }\n  }\n\n  if (headCountEl) {\n    for (let i = 0, j = headCountEl.previousElementSibling; i < headCount; i++, j = (j == null ? void 0 : j.previousElementSibling) || null) {\n      if (((_b = j == null ? void 0 : j.tagName) == null ? void 0 : _b.toLowerCase()) === type) oldHeadElements.push(j);\n    }\n  } else {\n    headCountEl = document.createElement(\"meta\");\n    headCountEl.setAttribute(\"name\", HEAD_COUNT_KEY);\n    headCountEl.setAttribute(\"content\", \"0\");\n    head.append(headCountEl);\n  }\n\n  let newElements = tags.map(tag => ({\n    element: createElement(tag.tag, tag.props, document),\n    body: tag.props.body ?? false\n  }));\n  newElements = newElements.filter(newEl => {\n    for (let i = 0; i < oldHeadElements.length; i++) {\n      const oldEl = oldHeadElements[i];\n\n      if (isEqualNode(oldEl, newEl.element)) {\n        oldHeadElements.splice(i, 1);\n        return false;\n      }\n    }\n\n    for (let i = 0; i < oldBodyElements.length; i++) {\n      const oldEl = oldBodyElements[i];\n\n      if (isEqualNode(oldEl, newEl.element)) {\n        oldBodyElements.splice(i, 1);\n        return false;\n      }\n    }\n\n    return true;\n  });\n  oldBodyElements.forEach(t => {\n    var _a2;\n\n    return (_a2 = t.parentNode) == null ? void 0 : _a2.removeChild(t);\n  });\n  oldHeadElements.forEach(t => {\n    var _a2;\n\n    return (_a2 = t.parentNode) == null ? void 0 : _a2.removeChild(t);\n  });\n  newElements.forEach(t => {\n    if (t.body === true) body.insertAdjacentElement(\"beforeend\", t.element);else head.insertBefore(t.element, headCountEl);\n  });\n  headCountEl.setAttribute(\"content\", `${headCount - oldHeadElements.length + newElements.filter(t => !t.body).length}`);\n}; // src/dom/update-dom.ts\n\n\nvar updateDOM = ({\n  domCtx,\n  document,\n  previousTags\n}) => {\n  if (!document) document = window.document;\n  if (domCtx.title !== void 0) document.title = domCtx.title;\n  setAttrs(document.documentElement, domCtx.htmlAttrs);\n  setAttrs(document.body, domCtx.bodyAttrs);\n  const tags = /* @__PURE__ */new Set([...Object.keys(domCtx.actualTags), ...previousTags]);\n\n  for (const tag of tags) updateElements(document, tag, domCtx.actualTags[tag] || []);\n\n  previousTags.clear();\n  Object.keys(domCtx.actualTags).forEach(i => previousTags.add(i));\n}; // src/components.ts\n\n\nimport { defineComponent, onBeforeUnmount, ref, watchEffect } from \"vue\";\n\nvar addVNodeToHeadObj = (node, obj) => {\n  const type = node.type === \"html\" ? \"htmlAttrs\" : node.type === \"body\" ? \"bodyAttrs\" : node.type;\n  if (typeof type !== \"string\" || !(type in obj)) return;\n  const props = { ...node.props,\n    children: Array.isArray(node.children) ? node.children[0].children : node.children\n  };\n  if (Array.isArray(obj[type])) obj[type].push(props);else if (type === \"title\") obj.title = props.children;else obj[type] = props;\n};\n\nvar vnodesToHeadObj = nodes => {\n  const obj = {\n    title: void 0,\n    htmlAttrs: void 0,\n    bodyAttrs: void 0,\n    base: void 0,\n    meta: [],\n    link: [],\n    style: [],\n    script: [],\n    noscript: []\n  };\n\n  for (const node of nodes) {\n    if (typeof node.type === \"symbol\" && Array.isArray(node.children)) {\n      for (const childNode of node.children) addVNodeToHeadObj(childNode, obj);\n    } else {\n      addVNodeToHeadObj(node, obj);\n    }\n  }\n\n  return obj;\n};\n\nvar Head = /* @__PURE__ */defineComponent({\n  name: \"Head\",\n\n  setup(_, {\n    slots\n  }) {\n    const head = injectHead();\n    let obj;\n    onBeforeUnmount(() => {\n      if (obj) {\n        head.removeHeadObjs(obj);\n        head.updateDOM();\n      }\n    });\n    return () => {\n      watchEffect(() => {\n        if (!slots.default) return;\n        if (obj) head.removeHeadObjs(obj);\n        obj = ref(vnodesToHeadObj(slots.default()));\n        head.addHeadObjs(obj);\n        if (typeof window !== \"undefined\") head.updateDOM();\n      });\n      return null;\n    };\n  }\n\n}); // src/ssr/stringify-attrs.ts\n\nvar escapeHtml = s => s.replace(/&/g, \"&amp;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&#39;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\n\nvar escapeJS = s => s.replace(/[\"'\\\\\\n\\r\\u2028\\u2029]/g, character => {\n  switch (character) {\n    case '\"':\n    case \"'\":\n    case \"\\\\\":\n      return `\\\\${character}`;\n\n    case \"\\n\":\n      return \"\\\\n\";\n\n    case \"\\r\":\n      return \"\\\\r\";\n\n    case \"\\u2028\":\n      return \"\\\\u2028\";\n\n    case \"\\u2029\":\n      return \"\\\\u2029\";\n  }\n\n  return character;\n});\n\nvar stringifyAttrName = str => str.replace(/[\\s\"'><\\/=]/g, \"\").replace(/[^a-zA-Z0-9_-]/g, \"\");\n\nvar stringifyAttrValue = str => escapeJS(str.replace(/\"/g, \"&quot;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\"));\n\nvar stringifyAttrs = (attributes, options = {}) => {\n  const handledAttributes = [];\n\n  for (const [key, value] of Object.entries(attributes)) {\n    if (key === \"children\" || key === \"innerHTML\" || key === \"textContent\" || key === \"key\") continue;\n    if (value === false || value == null) continue;\n    let attribute = stringifyAttrName(key);\n\n    if (value !== true) {\n      const val = String(value);\n\n      if (options.raw) {\n        attribute += `=\"${val}\"`;\n      } else {\n        if (attribute === \"href\" || attribute === \"src\") attribute += `=\"${stringifyAttrValue(encodeURI(val))}\"`;else attribute += `=\"${stringifyAttrValue(val)}\"`;\n      }\n    }\n\n    handledAttributes.push(attribute);\n  }\n\n  return handledAttributes.length > 0 ? ` ${handledAttributes.join(\" \")}` : \"\";\n}; // src/ssr/index.ts\n\n\nvar tagToString = tag => {\n  var _a;\n\n  let isBodyTag = false;\n\n  if (tag.props.body) {\n    isBodyTag = true;\n    delete tag.props.body;\n  }\n\n  if (tag.props.renderPriority) delete tag.props.renderPriority;\n  const attrs = stringifyAttrs(tag.props, tag._options);\n\n  if (SELF_CLOSING_TAGS.includes(tag.tag)) {\n    return `<${tag.tag}${attrs}${isBodyTag ? `  ${BODY_TAG_ATTR_NAME}=\"true\"` : \"\"}>`;\n  }\n\n  let innerContent = \"\";\n  if (((_a = tag._options) == null ? void 0 : _a.raw) && tag.props.innerHTML) innerContent = tag.props.innerHTML;\n  if (!innerContent && tag.props.textContent) innerContent = escapeJS(escapeHtml(tag.props.textContent));\n  if (!innerContent && tag.props.children) innerContent = escapeJS(escapeHtml(tag.props.children));\n  return `<${tag.tag}${attrs}${isBodyTag ? ` ${BODY_TAG_ATTR_NAME}=\"true\"` : \"\"}>${innerContent}</${tag.tag}>`;\n};\n\nvar renderHeadToString = head => {\n  var _a;\n\n  const tags = [];\n  const bodyTags = [];\n  let titleTag = \"\";\n  const attrs = {\n    htmlAttrs: {},\n    bodyAttrs: {}\n  };\n\n  for (const tag of head.headTags.sort(sortTags)) {\n    if (tag.tag === \"title\") {\n      titleTag = tagToString(tag);\n    } else if (tag.tag === \"htmlAttrs\" || tag.tag === \"bodyAttrs\") {\n      for (const k in tag.props) {\n        const keyName = stringifyAttrName(k);\n        attrs[tag.tag][keyName] = ((_a = tag._options) == null ? void 0 : _a.raw) ? tag.props[keyName] : tag.props[stringifyAttrValue(keyName)];\n      }\n    } else if (tag.props.body) {\n      bodyTags.push(tagToString(tag));\n    } else {\n      tags.push(tagToString(tag));\n    }\n  }\n\n  tags.push(`<meta name=\"${HEAD_COUNT_KEY}\" content=\"${tags.length}\">`);\n  return {\n    get headTags() {\n      return titleTag + tags.join(\"\");\n    },\n\n    get htmlAttrs() {\n      return stringifyAttrs({ ...attrs.htmlAttrs,\n        [HEAD_ATTRS_KEY]: Object.keys(attrs.htmlAttrs).join(\",\")\n      }, {\n        raw: true\n      });\n    },\n\n    get bodyAttrs() {\n      return stringifyAttrs({ ...attrs.bodyAttrs,\n        [HEAD_ATTRS_KEY]: Object.keys(attrs.bodyAttrs).join(\",\")\n      }, {\n        raw: true\n      });\n    },\n\n    get bodyTags() {\n      return bodyTags.join(\"\");\n    }\n\n  };\n}; // src/index.ts\n\n\nvar injectHead = () => {\n  const head = inject(PROVIDE_KEY);\n  if (!head) throw new Error(\"You may forget to apply app.use(head)\");\n  return head;\n};\n\nvar acceptFields = [\"title\", \"meta\", \"link\", \"base\", \"style\", \"script\", \"noscript\", \"htmlAttrs\", \"bodyAttrs\"];\n\nvar renderTitleTemplate = (template, title) => {\n  if (template == null) return \"\";\n  if (typeof template === \"function\") return template(title);\n  return template.replace(\"%s\", title ?? \"\");\n};\n\nvar headObjToTags = obj => {\n  const tags = [];\n  const keys = Object.keys(obj);\n\n  const convertLegacyKey = value => {\n    if (value.hid) {\n      value.key = value.hid;\n      delete value.hid;\n    }\n\n    if (value.vmid) {\n      value.key = value.vmid;\n      delete value.vmid;\n    }\n\n    return value;\n  };\n\n  for (const key of keys) {\n    if (obj[key] == null) continue;\n\n    switch (key) {\n      case \"title\":\n        tags.push({\n          tag: key,\n          props: {\n            textContent: obj[key]\n          }\n        });\n        break;\n\n      case \"titleTemplate\":\n        break;\n\n      case \"base\":\n        tags.push({\n          tag: key,\n          props: {\n            key: \"default\",\n            ...obj[key]\n          }\n        });\n        break;\n\n      default:\n        if (acceptFields.includes(key)) {\n          const value = obj[key];\n\n          if (Array.isArray(value)) {\n            value.forEach(item => {\n              const props = convertLegacyKey(item);\n              tags.push({\n                tag: key,\n                props\n              });\n            });\n          } else if (value) {\n            tags.push({\n              tag: key,\n              props: convertLegacyKey(value)\n            });\n          }\n        }\n\n        break;\n    }\n  }\n\n  return tags;\n};\n\nvar createHead = initHeadObject => {\n  let allHeadObjs = [];\n  const previousTags = /* @__PURE__ */new Set();\n  let headObjId = 0;\n  const hookBeforeDomUpdate = [];\n  const hookTagsResolved = [];\n  if (initHeadObject) allHeadObjs.push({\n    input: initHeadObject\n  });\n  let domUpdateTick = null;\n  let domCtx;\n  const head = {\n    install(app) {\n      app.config.globalProperties.$head = head;\n      app.provide(PROVIDE_KEY, head);\n    },\n\n    hookBeforeDomUpdate,\n    hookTagsResolved,\n\n    get headTags() {\n      const deduped = [];\n      const deduping = {};\n      const resolvedHeadObjs = allHeadObjs.map(resolveHeadEntry);\n      const titleTemplate = resolvedHeadObjs.map(i => i.input.titleTemplate).reverse().find(i => i != null);\n      resolvedHeadObjs.forEach((objs, headObjectIdx) => {\n        const tags2 = headObjToTags(objs.input);\n        tags2.forEach((tag, tagIdx) => {\n          var _a;\n\n          tag._position = headObjectIdx * 1e4 + tagIdx;\n          if (tag._options) delete tag._options;\n          if (objs.options) tag._options = objs.options;\n\n          if (titleTemplate && tag.tag === \"title\") {\n            tag.props.textContent = renderTitleTemplate(titleTemplate, tag.props.textContent);\n          }\n\n          if (!((_a = tag._options) == null ? void 0 : _a.raw)) {\n            for (const k in tag.props) {\n              if (k.startsWith(\"on\")) {\n                console.warn(\"[@vueuse/head] Warning, you must use `useHeadRaw` to set event listeners. See https://github.com/vueuse/head/pull/118\", tag);\n                delete tag.props[k];\n              }\n            }\n\n            if (tag.props.innerHTML) {\n              console.warn(\"[@vueuse/head] Warning, you must use `useHeadRaw` to use `innerHTML`\", tag);\n              delete tag.props.innerHTML;\n            }\n          }\n\n          const dedupeKey = tagDedupeKey(tag);\n          if (dedupeKey) deduping[dedupeKey] = tag;else deduped.push(tag);\n        });\n      });\n      deduped.push(...Object.values(deduping));\n      const tags = deduped.sort((a, b) => a._position - b._position);\n      head.hookTagsResolved.forEach(fn => fn(tags));\n      return tags;\n    },\n\n    addHeadObjs(objs, options) {\n      const entry = {\n        input: objs,\n        options,\n        id: headObjId++\n      };\n      allHeadObjs.push(entry);\n      return () => {\n        allHeadObjs = allHeadObjs.filter(_objs => _objs.id !== entry.id);\n      };\n    },\n\n    removeHeadObjs(objs) {\n      allHeadObjs = allHeadObjs.filter(_objs => _objs.input !== objs);\n    },\n\n    updateDOM: (document, force) => {\n      domCtx = {\n        title: void 0,\n        htmlAttrs: {},\n        bodyAttrs: {},\n        actualTags: {}\n      };\n\n      for (const tag of head.headTags.sort(sortTags)) {\n        if (tag.tag === \"title\") {\n          domCtx.title = tag.props.textContent;\n          continue;\n        }\n\n        if (tag.tag === \"htmlAttrs\" || tag.tag === \"bodyAttrs\") {\n          Object.assign(domCtx[tag.tag], tag.props);\n          continue;\n        }\n\n        domCtx.actualTags[tag.tag] = domCtx.actualTags[tag.tag] || [];\n        domCtx.actualTags[tag.tag].push(tag);\n      }\n\n      const doDomUpdate = () => {\n        domUpdateTick = null;\n\n        for (const k in head.hookBeforeDomUpdate) {\n          if (head.hookBeforeDomUpdate[k](domCtx.actualTags) === false) return;\n        }\n\n        updateDOM({\n          domCtx,\n          document,\n          previousTags\n        });\n      };\n\n      if (force) {\n        doDomUpdate();\n        return;\n      }\n\n      domUpdateTick = domUpdateTick || nextTick(() => doDomUpdate());\n    }\n  };\n  return head;\n};\n\nvar IS_BROWSER = typeof window !== \"undefined\";\n\nvar _useHead = (headObj, options = {}) => {\n  const head = injectHead();\n  const removeHeadObjs = head.addHeadObjs(headObj, options);\n\n  if (IS_BROWSER) {\n    watchEffect2(() => {\n      head.updateDOM();\n    });\n    onBeforeUnmount2(() => {\n      removeHeadObjs();\n      head.updateDOM();\n    });\n  }\n};\n\nvar useHead = headObj => {\n  _useHead(headObj);\n};\n\nvar useHeadRaw = headObj => {\n  _useHead(headObj, {\n    raw: true\n  });\n};\n\nexport { Head, createElement, createHead, escapeHtml, escapeJS, injectHead, isEqualNode, renderHeadToString, resolveHeadEntry, setAttrs, sortTags, stringifyAttrName, stringifyAttrValue, stringifyAttrs, tagDedupeKey, tagToString, updateElements, useHead, useHeadRaw };","map":{"version":3,"names":["inject","nextTick","onBeforeUnmount","onBeforeUnmount2","watchEffect","watchEffect2","PROVIDE_KEY","HEAD_COUNT_KEY","HEAD_ATTRS_KEY","SELF_CLOSING_TAGS","BODY_TAG_ATTR_NAME","resolveUnref","unref","sortTags","aTag","bTag","tagWeight","tag","props","renderPriority","charset","tagDedupeKey","includes","tagName","rel","name","n","value","getAttribute","hasAttribute","resolveUnrefDeeply","ref2","root","Array","isArray","map","Object","fromEntries","entries","key","resolveHeadEntry","obj","input","isEqualNode","oldTag","newTag","HTMLElement","nonce","cloneTag","cloneNode","setAttribute","setAttrs","el","attrs","existingAttrs","split","removeAttribute","keys","push","length","join","createElement","document","body","textContent","innerHTML","updateElements","window","type","tags","_a","_b","head","headCountEl","querySelector","bodyMetaElements","querySelectorAll","headCount","Number","oldHeadElements","oldBodyElements","i","toLowerCase","j","previousElementSibling","append","newElements","element","filter","newEl","oldEl","splice","forEach","t","_a2","parentNode","removeChild","insertAdjacentElement","insertBefore","updateDOM","domCtx","previousTags","title","documentElement","htmlAttrs","bodyAttrs","Set","actualTags","clear","add","defineComponent","ref","addVNodeToHeadObj","node","children","vnodesToHeadObj","nodes","base","meta","link","style","script","noscript","childNode","Head","setup","_","slots","injectHead","removeHeadObjs","default","addHeadObjs","escapeHtml","s","replace","escapeJS","character","stringifyAttrName","str","stringifyAttrValue","stringifyAttrs","attributes","options","handledAttributes","attribute","val","String","raw","encodeURI","tagToString","isBodyTag","_options","innerContent","renderHeadToString","bodyTags","titleTag","headTags","sort","k","keyName","Error","acceptFields","renderTitleTemplate","template","headObjToTags","convertLegacyKey","hid","vmid","item","createHead","initHeadObject","allHeadObjs","headObjId","hookBeforeDomUpdate","hookTagsResolved","domUpdateTick","install","app","config","globalProperties","$head","provide","deduped","deduping","resolvedHeadObjs","titleTemplate","reverse","find","objs","headObjectIdx","tags2","tagIdx","_position","startsWith","console","warn","dedupeKey","values","a","b","fn","entry","id","_objs","force","assign","doDomUpdate","IS_BROWSER","_useHead","headObj","useHead","useHeadRaw"],"sources":["/Users/anhbernhardt/Desktop/ahbernhardt/ahbernhardt.github.io/node_modules/@vueuse/head/dist/index.mjs"],"sourcesContent":["// src/index.ts\nimport {\n  inject,\n  nextTick,\n  onBeforeUnmount as onBeforeUnmount2,\n  watchEffect as watchEffect2\n} from \"vue\";\n\n// src/constants.ts\nvar PROVIDE_KEY = \"usehead\";\nvar HEAD_COUNT_KEY = \"head:count\";\nvar HEAD_ATTRS_KEY = \"data-head-attrs\";\nvar SELF_CLOSING_TAGS = [\"meta\", \"link\", \"base\"];\nvar BODY_TAG_ATTR_NAME = \"data-meta-body\";\n\n// src/utils.ts\nimport { resolveUnref } from \"@vueuse/shared\";\nimport { unref } from \"vue\";\nvar sortTags = (aTag, bTag) => {\n  const tagWeight = (tag) => {\n    if (tag.props.renderPriority)\n      return tag.props.renderPriority;\n    switch (tag.tag) {\n      case \"base\":\n        return -1;\n      case \"meta\":\n        if (tag.props.charset)\n          return -2;\n        if (tag.props[\"http-equiv\"] === \"content-security-policy\")\n          return 0;\n        return 10;\n      default:\n        return 10;\n    }\n  };\n  return tagWeight(aTag) - tagWeight(bTag);\n};\nvar tagDedupeKey = (tag) => {\n  if (![\"meta\", \"base\", \"script\", \"link\", \"title\"].includes(tag.tag))\n    return false;\n  const { props, tag: tagName } = tag;\n  if (tagName === \"base\" || tagName === \"title\")\n    return tagName;\n  if (tagName === \"link\" && props.rel === \"canonical\")\n    return \"canonical\";\n  if (props.charset)\n    return \"charset\";\n  const name = [\"key\", \"id\", \"name\", \"property\", \"http-equiv\"];\n  for (const n of name) {\n    let value;\n    if (typeof props.getAttribute === \"function\" && props.hasAttribute(n))\n      value = props.getAttribute(n);\n    else\n      value = props[n];\n    if (value !== void 0) {\n      return `${tagName}-${n}-${value}`;\n    }\n  }\n  return false;\n};\nfunction resolveUnrefDeeply(ref2) {\n  const root = resolveUnref(ref2);\n  if (!ref2 || !root)\n    return root;\n  if (Array.isArray(root))\n    return root.map(resolveUnrefDeeply);\n  if (typeof root === \"object\") {\n    return Object.fromEntries(\n      Object.entries(root).map(([key, value]) => {\n        if (key === \"titleTemplate\")\n          return [key, unref(value)];\n        return [\n          key,\n          resolveUnrefDeeply(value)\n        ];\n      })\n    );\n  }\n  return root;\n}\nfunction resolveHeadEntry(obj) {\n  return {\n    ...obj,\n    input: resolveUnrefDeeply(obj.input)\n  };\n}\n\n// src/dom/utils.ts\nfunction isEqualNode(oldTag, newTag) {\n  if (oldTag instanceof HTMLElement && newTag instanceof HTMLElement) {\n    const nonce = newTag.getAttribute(\"nonce\");\n    if (nonce && !oldTag.getAttribute(\"nonce\")) {\n      const cloneTag = newTag.cloneNode(true);\n      cloneTag.setAttribute(\"nonce\", \"\");\n      cloneTag.nonce = nonce;\n      return nonce === oldTag.nonce && oldTag.isEqualNode(cloneTag);\n    }\n  }\n  return oldTag.isEqualNode(newTag);\n}\nvar setAttrs = (el, attrs) => {\n  const existingAttrs = el.getAttribute(HEAD_ATTRS_KEY);\n  if (existingAttrs) {\n    for (const key of existingAttrs.split(\",\")) {\n      if (!(key in attrs))\n        el.removeAttribute(key);\n    }\n  }\n  const keys = [];\n  for (const key in attrs) {\n    const value = attrs[key];\n    if (value == null)\n      continue;\n    if (value === false)\n      el.removeAttribute(key);\n    else\n      el.setAttribute(key, value);\n    keys.push(key);\n  }\n  if (keys.length)\n    el.setAttribute(HEAD_ATTRS_KEY, keys.join(\",\"));\n  else\n    el.removeAttribute(HEAD_ATTRS_KEY);\n};\n\n// src/dom/create-element.ts\nvar createElement = (tag, attrs, document) => {\n  const el = document.createElement(tag);\n  for (const key of Object.keys(attrs)) {\n    if (key === \"body\" && attrs.body === true) {\n      el.setAttribute(BODY_TAG_ATTR_NAME, \"true\");\n    } else {\n      const value = attrs[key];\n      if (key === \"renderPriority\" || key === \"key\" || value === false)\n        continue;\n      if (key === \"children\" || key === \"textContent\")\n        el.textContent = value;\n      else if (key === \"innerHTML\")\n        el.innerHTML = value;\n      else\n        el.setAttribute(key, value);\n    }\n  }\n  return el;\n};\n\n// src/dom/update-elements.ts\nvar updateElements = (document = window.document, type, tags) => {\n  var _a, _b;\n  const head = document.head;\n  const body = document.body;\n  let headCountEl = head.querySelector(`meta[name=\"${HEAD_COUNT_KEY}\"]`);\n  const bodyMetaElements = body.querySelectorAll(`[${BODY_TAG_ATTR_NAME}]`);\n  const headCount = headCountEl ? Number(headCountEl.getAttribute(\"content\")) : 0;\n  const oldHeadElements = [];\n  const oldBodyElements = [];\n  if (bodyMetaElements) {\n    for (let i = 0; i < bodyMetaElements.length; i++) {\n      if (bodyMetaElements[i] && ((_a = bodyMetaElements[i].tagName) == null ? void 0 : _a.toLowerCase()) === type)\n        oldBodyElements.push(bodyMetaElements[i]);\n    }\n  }\n  if (headCountEl) {\n    for (let i = 0, j = headCountEl.previousElementSibling; i < headCount; i++, j = (j == null ? void 0 : j.previousElementSibling) || null) {\n      if (((_b = j == null ? void 0 : j.tagName) == null ? void 0 : _b.toLowerCase()) === type)\n        oldHeadElements.push(j);\n    }\n  } else {\n    headCountEl = document.createElement(\"meta\");\n    headCountEl.setAttribute(\"name\", HEAD_COUNT_KEY);\n    headCountEl.setAttribute(\"content\", \"0\");\n    head.append(headCountEl);\n  }\n  let newElements = tags.map((tag) => ({\n    element: createElement(tag.tag, tag.props, document),\n    body: tag.props.body ?? false\n  }));\n  newElements = newElements.filter((newEl) => {\n    for (let i = 0; i < oldHeadElements.length; i++) {\n      const oldEl = oldHeadElements[i];\n      if (isEqualNode(oldEl, newEl.element)) {\n        oldHeadElements.splice(i, 1);\n        return false;\n      }\n    }\n    for (let i = 0; i < oldBodyElements.length; i++) {\n      const oldEl = oldBodyElements[i];\n      if (isEqualNode(oldEl, newEl.element)) {\n        oldBodyElements.splice(i, 1);\n        return false;\n      }\n    }\n    return true;\n  });\n  oldBodyElements.forEach((t) => {\n    var _a2;\n    return (_a2 = t.parentNode) == null ? void 0 : _a2.removeChild(t);\n  });\n  oldHeadElements.forEach((t) => {\n    var _a2;\n    return (_a2 = t.parentNode) == null ? void 0 : _a2.removeChild(t);\n  });\n  newElements.forEach((t) => {\n    if (t.body === true)\n      body.insertAdjacentElement(\"beforeend\", t.element);\n    else\n      head.insertBefore(t.element, headCountEl);\n  });\n  headCountEl.setAttribute(\n    \"content\",\n    `${headCount - oldHeadElements.length + newElements.filter((t) => !t.body).length}`\n  );\n};\n\n// src/dom/update-dom.ts\nvar updateDOM = ({ domCtx, document, previousTags }) => {\n  if (!document)\n    document = window.document;\n  if (domCtx.title !== void 0)\n    document.title = domCtx.title;\n  setAttrs(document.documentElement, domCtx.htmlAttrs);\n  setAttrs(document.body, domCtx.bodyAttrs);\n  const tags = /* @__PURE__ */ new Set([...Object.keys(domCtx.actualTags), ...previousTags]);\n  for (const tag of tags)\n    updateElements(document, tag, domCtx.actualTags[tag] || []);\n  previousTags.clear();\n  Object.keys(domCtx.actualTags).forEach((i) => previousTags.add(i));\n};\n\n// src/components.ts\nimport { defineComponent, onBeforeUnmount, ref, watchEffect } from \"vue\";\nvar addVNodeToHeadObj = (node, obj) => {\n  const type = node.type === \"html\" ? \"htmlAttrs\" : node.type === \"body\" ? \"bodyAttrs\" : node.type;\n  if (typeof type !== \"string\" || !(type in obj))\n    return;\n  const props = {\n    ...node.props,\n    children: Array.isArray(node.children) ? node.children[0].children : node.children\n  };\n  if (Array.isArray(obj[type]))\n    obj[type].push(props);\n  else if (type === \"title\")\n    obj.title = props.children;\n  else\n    obj[type] = props;\n};\nvar vnodesToHeadObj = (nodes) => {\n  const obj = {\n    title: void 0,\n    htmlAttrs: void 0,\n    bodyAttrs: void 0,\n    base: void 0,\n    meta: [],\n    link: [],\n    style: [],\n    script: [],\n    noscript: []\n  };\n  for (const node of nodes) {\n    if (typeof node.type === \"symbol\" && Array.isArray(node.children)) {\n      for (const childNode of node.children)\n        addVNodeToHeadObj(childNode, obj);\n    } else {\n      addVNodeToHeadObj(node, obj);\n    }\n  }\n  return obj;\n};\nvar Head = /* @__PURE__ */ defineComponent({\n  name: \"Head\",\n  setup(_, { slots }) {\n    const head = injectHead();\n    let obj;\n    onBeforeUnmount(() => {\n      if (obj) {\n        head.removeHeadObjs(obj);\n        head.updateDOM();\n      }\n    });\n    return () => {\n      watchEffect(() => {\n        if (!slots.default)\n          return;\n        if (obj)\n          head.removeHeadObjs(obj);\n        obj = ref(vnodesToHeadObj(slots.default()));\n        head.addHeadObjs(obj);\n        if (typeof window !== \"undefined\")\n          head.updateDOM();\n      });\n      return null;\n    };\n  }\n});\n\n// src/ssr/stringify-attrs.ts\nvar escapeHtml = (s) => s.replace(/&/g, \"&amp;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&#39;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\nvar escapeJS = (s) => s.replace(/[\"'\\\\\\n\\r\\u2028\\u2029]/g, (character) => {\n  switch (character) {\n    case '\"':\n    case \"'\":\n    case \"\\\\\":\n      return `\\\\${character}`;\n    case \"\\n\":\n      return \"\\\\n\";\n    case \"\\r\":\n      return \"\\\\r\";\n    case \"\\u2028\":\n      return \"\\\\u2028\";\n    case \"\\u2029\":\n      return \"\\\\u2029\";\n  }\n  return character;\n});\nvar stringifyAttrName = (str) => str.replace(/[\\s\"'><\\/=]/g, \"\").replace(/[^a-zA-Z0-9_-]/g, \"\");\nvar stringifyAttrValue = (str) => escapeJS(str.replace(/\"/g, \"&quot;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\"));\nvar stringifyAttrs = (attributes, options = {}) => {\n  const handledAttributes = [];\n  for (const [key, value] of Object.entries(attributes)) {\n    if (key === \"children\" || key === \"innerHTML\" || key === \"textContent\" || key === \"key\")\n      continue;\n    if (value === false || value == null)\n      continue;\n    let attribute = stringifyAttrName(key);\n    if (value !== true) {\n      const val = String(value);\n      if (options.raw) {\n        attribute += `=\"${val}\"`;\n      } else {\n        if (attribute === \"href\" || attribute === \"src\")\n          attribute += `=\"${stringifyAttrValue(encodeURI(val))}\"`;\n        else\n          attribute += `=\"${stringifyAttrValue(val)}\"`;\n      }\n    }\n    handledAttributes.push(attribute);\n  }\n  return handledAttributes.length > 0 ? ` ${handledAttributes.join(\" \")}` : \"\";\n};\n\n// src/ssr/index.ts\nvar tagToString = (tag) => {\n  var _a;\n  let isBodyTag = false;\n  if (tag.props.body) {\n    isBodyTag = true;\n    delete tag.props.body;\n  }\n  if (tag.props.renderPriority)\n    delete tag.props.renderPriority;\n  const attrs = stringifyAttrs(tag.props, tag._options);\n  if (SELF_CLOSING_TAGS.includes(tag.tag)) {\n    return `<${tag.tag}${attrs}${isBodyTag ? `  ${BODY_TAG_ATTR_NAME}=\"true\"` : \"\"}>`;\n  }\n  let innerContent = \"\";\n  if (((_a = tag._options) == null ? void 0 : _a.raw) && tag.props.innerHTML)\n    innerContent = tag.props.innerHTML;\n  if (!innerContent && tag.props.textContent)\n    innerContent = escapeJS(escapeHtml(tag.props.textContent));\n  if (!innerContent && tag.props.children)\n    innerContent = escapeJS(escapeHtml(tag.props.children));\n  return `<${tag.tag}${attrs}${isBodyTag ? ` ${BODY_TAG_ATTR_NAME}=\"true\"` : \"\"}>${innerContent}</${tag.tag}>`;\n};\nvar renderHeadToString = (head) => {\n  var _a;\n  const tags = [];\n  const bodyTags = [];\n  let titleTag = \"\";\n  const attrs = { htmlAttrs: {}, bodyAttrs: {} };\n  for (const tag of head.headTags.sort(sortTags)) {\n    if (tag.tag === \"title\") {\n      titleTag = tagToString(tag);\n    } else if (tag.tag === \"htmlAttrs\" || tag.tag === \"bodyAttrs\") {\n      for (const k in tag.props) {\n        const keyName = stringifyAttrName(k);\n        attrs[tag.tag][keyName] = ((_a = tag._options) == null ? void 0 : _a.raw) ? tag.props[keyName] : tag.props[stringifyAttrValue(keyName)];\n      }\n    } else if (tag.props.body) {\n      bodyTags.push(tagToString(tag));\n    } else {\n      tags.push(tagToString(tag));\n    }\n  }\n  tags.push(`<meta name=\"${HEAD_COUNT_KEY}\" content=\"${tags.length}\">`);\n  return {\n    get headTags() {\n      return titleTag + tags.join(\"\");\n    },\n    get htmlAttrs() {\n      return stringifyAttrs(\n        {\n          ...attrs.htmlAttrs,\n          [HEAD_ATTRS_KEY]: Object.keys(attrs.htmlAttrs).join(\",\")\n        },\n        { raw: true }\n      );\n    },\n    get bodyAttrs() {\n      return stringifyAttrs(\n        {\n          ...attrs.bodyAttrs,\n          [HEAD_ATTRS_KEY]: Object.keys(attrs.bodyAttrs).join(\",\")\n        },\n        { raw: true }\n      );\n    },\n    get bodyTags() {\n      return bodyTags.join(\"\");\n    }\n  };\n};\n\n// src/index.ts\nvar injectHead = () => {\n  const head = inject(PROVIDE_KEY);\n  if (!head)\n    throw new Error(\"You may forget to apply app.use(head)\");\n  return head;\n};\nvar acceptFields = [\n  \"title\",\n  \"meta\",\n  \"link\",\n  \"base\",\n  \"style\",\n  \"script\",\n  \"noscript\",\n  \"htmlAttrs\",\n  \"bodyAttrs\"\n];\nvar renderTitleTemplate = (template, title) => {\n  if (template == null)\n    return \"\";\n  if (typeof template === \"function\")\n    return template(title);\n  return template.replace(\"%s\", title ?? \"\");\n};\nvar headObjToTags = (obj) => {\n  const tags = [];\n  const keys = Object.keys(obj);\n  const convertLegacyKey = (value) => {\n    if (value.hid) {\n      value.key = value.hid;\n      delete value.hid;\n    }\n    if (value.vmid) {\n      value.key = value.vmid;\n      delete value.vmid;\n    }\n    return value;\n  };\n  for (const key of keys) {\n    if (obj[key] == null)\n      continue;\n    switch (key) {\n      case \"title\":\n        tags.push({ tag: key, props: { textContent: obj[key] } });\n        break;\n      case \"titleTemplate\":\n        break;\n      case \"base\":\n        tags.push({ tag: key, props: { key: \"default\", ...obj[key] } });\n        break;\n      default:\n        if (acceptFields.includes(key)) {\n          const value = obj[key];\n          if (Array.isArray(value)) {\n            value.forEach((item) => {\n              const props = convertLegacyKey(item);\n              tags.push({ tag: key, props });\n            });\n          } else if (value) {\n            tags.push({ tag: key, props: convertLegacyKey(value) });\n          }\n        }\n        break;\n    }\n  }\n  return tags;\n};\nvar createHead = (initHeadObject) => {\n  let allHeadObjs = [];\n  const previousTags = /* @__PURE__ */ new Set();\n  let headObjId = 0;\n  const hookBeforeDomUpdate = [];\n  const hookTagsResolved = [];\n  if (initHeadObject)\n    allHeadObjs.push({ input: initHeadObject });\n  let domUpdateTick = null;\n  let domCtx;\n  const head = {\n    install(app) {\n      app.config.globalProperties.$head = head;\n      app.provide(PROVIDE_KEY, head);\n    },\n    hookBeforeDomUpdate,\n    hookTagsResolved,\n    get headTags() {\n      const deduped = [];\n      const deduping = {};\n      const resolvedHeadObjs = allHeadObjs.map(resolveHeadEntry);\n      const titleTemplate = resolvedHeadObjs.map((i) => i.input.titleTemplate).reverse().find((i) => i != null);\n      resolvedHeadObjs.forEach((objs, headObjectIdx) => {\n        const tags2 = headObjToTags(objs.input);\n        tags2.forEach((tag, tagIdx) => {\n          var _a;\n          tag._position = headObjectIdx * 1e4 + tagIdx;\n          if (tag._options)\n            delete tag._options;\n          if (objs.options)\n            tag._options = objs.options;\n          if (titleTemplate && tag.tag === \"title\") {\n            tag.props.textContent = renderTitleTemplate(\n              titleTemplate,\n              tag.props.textContent\n            );\n          }\n          if (!((_a = tag._options) == null ? void 0 : _a.raw)) {\n            for (const k in tag.props) {\n              if (k.startsWith(\"on\")) {\n                console.warn(\"[@vueuse/head] Warning, you must use `useHeadRaw` to set event listeners. See https://github.com/vueuse/head/pull/118\", tag);\n                delete tag.props[k];\n              }\n            }\n            if (tag.props.innerHTML) {\n              console.warn(\"[@vueuse/head] Warning, you must use `useHeadRaw` to use `innerHTML`\", tag);\n              delete tag.props.innerHTML;\n            }\n          }\n          const dedupeKey = tagDedupeKey(tag);\n          if (dedupeKey)\n            deduping[dedupeKey] = tag;\n          else\n            deduped.push(tag);\n        });\n      });\n      deduped.push(...Object.values(deduping));\n      const tags = deduped.sort((a, b) => a._position - b._position);\n      head.hookTagsResolved.forEach((fn) => fn(tags));\n      return tags;\n    },\n    addHeadObjs(objs, options) {\n      const entry = { input: objs, options, id: headObjId++ };\n      allHeadObjs.push(entry);\n      return () => {\n        allHeadObjs = allHeadObjs.filter((_objs) => _objs.id !== entry.id);\n      };\n    },\n    removeHeadObjs(objs) {\n      allHeadObjs = allHeadObjs.filter((_objs) => _objs.input !== objs);\n    },\n    updateDOM: (document, force) => {\n      domCtx = {\n        title: void 0,\n        htmlAttrs: {},\n        bodyAttrs: {},\n        actualTags: {}\n      };\n      for (const tag of head.headTags.sort(sortTags)) {\n        if (tag.tag === \"title\") {\n          domCtx.title = tag.props.textContent;\n          continue;\n        }\n        if (tag.tag === \"htmlAttrs\" || tag.tag === \"bodyAttrs\") {\n          Object.assign(domCtx[tag.tag], tag.props);\n          continue;\n        }\n        domCtx.actualTags[tag.tag] = domCtx.actualTags[tag.tag] || [];\n        domCtx.actualTags[tag.tag].push(tag);\n      }\n      const doDomUpdate = () => {\n        domUpdateTick = null;\n        for (const k in head.hookBeforeDomUpdate) {\n          if (head.hookBeforeDomUpdate[k](domCtx.actualTags) === false)\n            return;\n        }\n        updateDOM({ domCtx, document, previousTags });\n      };\n      if (force) {\n        doDomUpdate();\n        return;\n      }\n      domUpdateTick = domUpdateTick || nextTick(() => doDomUpdate());\n    }\n  };\n  return head;\n};\nvar IS_BROWSER = typeof window !== \"undefined\";\nvar _useHead = (headObj, options = {}) => {\n  const head = injectHead();\n  const removeHeadObjs = head.addHeadObjs(headObj, options);\n  if (IS_BROWSER) {\n    watchEffect2(() => {\n      head.updateDOM();\n    });\n    onBeforeUnmount2(() => {\n      removeHeadObjs();\n      head.updateDOM();\n    });\n  }\n};\nvar useHead = (headObj) => {\n  _useHead(headObj);\n};\nvar useHeadRaw = (headObj) => {\n  _useHead(headObj, { raw: true });\n};\nexport {\n  Head,\n  createElement,\n  createHead,\n  escapeHtml,\n  escapeJS,\n  injectHead,\n  isEqualNode,\n  renderHeadToString,\n  resolveHeadEntry,\n  setAttrs,\n  sortTags,\n  stringifyAttrName,\n  stringifyAttrValue,\n  stringifyAttrs,\n  tagDedupeKey,\n  tagToString,\n  updateElements,\n  useHead,\n  useHeadRaw\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}